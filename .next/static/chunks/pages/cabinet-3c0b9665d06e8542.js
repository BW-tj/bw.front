(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{782:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cabinet",function(){return n(9789)}])},9789:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return x}});var r=n(8520),a=n.n(r),i=n(5893),o=n(7294),s=n(9008),l=n(4184),u=n.n(l),c=n(2774),d=n(5168),_=n(5806),f=n.n(_),p=n(5617),h=n(6079),b=n(1163);function v(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,a)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}var w=function(e){var t=e.title,n=e.value,r=e.setValue,a=e.type,o=void 0===a?"text":a,s=e.error,l=void 0===s?"":s;return(0,i.jsxs)("div",{className:u()(f().label,""!==l&&f().error),children:[(0,i.jsx)("div",{className:f().label_title,children:t}),(0,i.jsx)("input",{type:o,className:f().label_input,value:n,onChange:function(e){return r(e.target.value)}}),(0,i.jsx)(c.Z,{condition:""!==l.trim(),children:(0,i.jsx)("div",{className:f().error_info,children:l})})]})},x=!0;t.default=function(e){var t,n=e.categories,r=(0,o.useState)(!0),l=r[0],c=r[1],_=(0,p.v9)((function(e){return e.user})),m=(0,p.I0)(),x=(0,b.useRouter)(),y=(0,o.useState)({firstname:"",lastname:"",email:"",phone:"",password:""}),g=y[0],N=(y[1],(0,o.useState)("")),C=N[0],S=N[1],O=(0,o.useState)(""),k=O[0],P=O[1],E=(0,o.useState)(""),V=E[0],A=E[1],T=(0,o.useState)(""),I=T[0],q=T[1],F=(0,o.useState)(""),G=F[0],Z=F[1],z=(0,o.useState)(""),B=z[0],D=z[1],L=(0,o.useState)(""),U=L[0],X=L[1],H=(0,o.useState)(""),J=H[0],K=H[1],M=(t=a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),t=JSON.stringify({email:V,phoneNumber:I,name:C,lastName:k,address:G,password:U,oldPassword:B}),n={method:"PUT",headers:{"Content-Type":"application/json"},body:t},_.isAuth&&(n=j({},n,{headers:j({},n.headers,{Authorization:"Bearer "+localStorage.getItem("bw-client-token")})})),e.next=7,fetch("https://api.chistayaliniya.tj/api/users/profile",n);case 7:return e.prev=7,setTimeout((function(){c(!1)}),200),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[0,,7,10]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){v(i,r,a,o,s,"next",e)}function s(e){v(i,r,a,o,s,"throw",e)}o(void 0)}))});return(0,o.useEffect)((function(){_.isAuth||(localStorage.removeItem("bw-client-token"),m((0,h.k)()),x.push("/login"))}),[_.isAuth,m,x]),(0,o.useEffect)((function(){if(_.isAuth){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("bw-client-token")}};fetch("".concat("https://api.chistayaliniya.tj/api","/users/profile"),e).then((function(e){return e.json()})).then((function(e){c(!1),S(e.name),P(e.lastName),q(e.phone),A(e.email),Z(e.address)}))}}),[m,_.isAuth]),l?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(d.Z,{categories:n,children:[(0,i.jsxs)(s.default,{children:[(0,i.jsx)("title",{children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),(0,i.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,i.jsx)("div",{className:f().root,children:(0,i.jsxs)("div",{className:f().form,children:[(0,i.jsx)("div",{className:f().title,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),(0,i.jsx)(w,{required:!0,title:"\u0418\u043c\u044f",value:C,setValue:S,error:g.firstname}),(0,i.jsx)(w,{required:!0,title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:k,setValue:P,error:g.lastname}),(0,i.jsx)(w,{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",value:I,setValue:q,error:g.phone}),(0,i.jsx)(w,{required:!0,title:"\u041f\u043e\u0447\u0442\u0430",value:V,setValue:A,type:"email",error:g.email}),(0,i.jsx)(w,{title:"\u0410\u0434\u0440\u0435\u0441",value:G,setValue:Z}),(0,i.jsx)(w,{title:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:B,setValue:D,type:"password"}),(0,i.jsx)(w,{title:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:U,setValue:X,type:"password",error:g.password}),(0,i.jsx)(w,{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:J,setValue:K,type:"password"}),(0,i.jsxs)("div",{className:f().buttons_group,children:[(0,i.jsx)("button",{className:u()(f().button,f().outlined),onClick:function(){window.location.replace("/")},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,i.jsx)("button",{className:u()(f().button,f().contained),onClick:function(){return M()},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})]})]})})]})}},5806:function(e){e.exports={root:"Cabinet_root__8D9o1",form:"Cabinet_form__PhLHK",title:"Cabinet_title__nwALO",label:"Cabinet_label__Mi9I3",error:"Cabinet_error__oyv1O",label_input:"Cabinet_label_input__goa1F",label_title:"Cabinet_label_title__gq9Ub",buttons_group:"Cabinet_buttons_group__s_e8G",button:"Cabinet_button__v3Fbt",contained:"Cabinet_contained___09jl",outlined:"Cabinet_outlined__GFYbZ",error_info:"Cabinet_error_info__vZEsg"}}},function(e){e.O(0,[92,168,774,888,179],(function(){return t=782,e(e.s=t);var t}));var t=e.O();_N_E=t}]);