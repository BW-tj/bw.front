(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[969],{7095:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order-list",function(){return o(1837)}])},4660:function(e,r,o){"use strict";var n=o(5893),t=o(4184),i=o.n(t),s=(o(7294),o(1697)),l=o.n(s);r.Z=function(e){var r=e.children,o=e.className;return(0,n.jsx)("div",{className:l().root,children:(0,n.jsx)("div",{className:i()(l().wrap,o),children:r})})}},1837:function(e,r,o){"use strict";o.r(r),o.d(r,{__N_SSG:function(){return f}});var n=o(8520),t=o.n(n),i=o(5893),s=o(7294),l=o(9008),d=o(1664),a=o(5617),c=o(4660),_=o(5168),u=o(2358),p=o.n(u),m=o(1163),h=o(9484),v=o(4184),w=o.n(v);function b(e,r,o,n,t,i,s){try{var l=e[i](s),d=l.value}catch(a){return void o(a)}l.done?r(d):Promise.resolve(d).then(n,t)}function x(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var o=[],n=!0,t=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(o.push(s.value),!r||o.length!==r);n=!0);}catch(d){t=!0,i=d}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}return o}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var j=function(e){var r=e.item,o=x(s.useState(!1),2),n=o[0],t=o[1];return(0,i.jsxs)("div",{className:p().mobileDropdown,children:[(0,i.jsx)("button",{className:p().mobileDropdown__label,onClick:function(){return t(!n)},children:(0,i.jsxs)("div",{className:p().container,children:[(0,i.jsx)("div",{className:p().mobileDropdown__prop,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),(0,i.jsxs)("div",{className:p().mobileDropdown__value,children:[r.type.reduce((function(e,r){return e+(r.price-r.price/100*r.discount)}),0)," \u0441."]}),(0,i.jsx)("div",{className:w()(p().mobileDropdown__arrow,n&&p().open),children:(0,i.jsx)(h.Wd,{})})]})}),n&&(0,i.jsx)("div",{className:p().mobileDropdown__content,children:(0,i.jsxs)("div",{className:p().container,children:[(0,i.jsxs)("div",{className:p().mobileDropdown__rows,children:[(0,i.jsxs)("div",{className:p().mobileDropdown__content__row,children:[(0,i.jsx)("div",{className:p().mobileDropdown__prop,children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,i.jsx)("div",{className:p().mobileDropdown__value,children:(0,i.jsx)("div",{className:w()(p().status,"\u041d\u043e\u0432\u044b\u0439"===r.orderStatus&&p().new,"\u041e\u0434\u043e\u0431\u0440\u0435\u043d\u043e"===r.orderStatus&&p().approved,"\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e"===r.orderStatus&&p().rejected),children:r.orderStatus})})]}),(0,i.jsxs)("div",{className:p().mobileDropdown__content__row,children:[(0,i.jsx)("div",{className:p().mobileDropdown__prop,children:"\u041a\u043e\u043b-\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),(0,i.jsxs)("div",{className:p().mobileDropdown__value,children:[r.type.reduce((function(e,r){return e+r.count}),0)," \u0448\u0442."]})]}),(0,i.jsxs)("div",{className:p().mobileDropdown__content__row,children:[(0,i.jsx)("div",{className:p().mobileDropdown__prop,children:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0442\u0430\u0432\u043a\u0438"}),(0,i.jsx)("div",{className:p().mobileDropdown__value,children:r.deliveryType})]}),(0,i.jsxs)("div",{className:p().mobileDropdown__content__row,children:[(0,i.jsx)("div",{className:p().mobileDropdown__prop,children:"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"}),(0,i.jsx)("div",{className:p().mobileDropdown__value,children:r.paymentType})]}),(0,i.jsxs)("div",{className:p().mobileDropdown__content__row,children:[(0,i.jsx)("div",{className:p().mobileDropdown__prop,children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,i.jsx)("div",{className:p().mobileDropdown__value,children:new Date(r.orderAt).toLocaleDateString()})]})]}),(0,i.jsx)(d.default,{href:"/order/"+r.orderId,children:(0,i.jsx)("a",{className:p().mobileDropdown__link,children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})})]})})]})},f=!0;r.default=function(e){var r=e.categories,o=(0,a.v9)((function(e){return e.user})),n=(0,m.useRouter)(),d=x(s.useState([]),2),u=d[0],h=d[1],v=x(s.useState(!1),2),w=v[0],f=v[1],N=s.useCallback((function(e){n.push("/order/".concat(e))}),[n]);return s.useEffect((function(){if(!o.isAuth)return n.push("/");var e;(e=t().mark((function e(){var r,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,fetch("https://api.chistayaliniya.tj/api/order/userorders",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o.token}});case 4:return 401!==(r=e.sent).status&&403!==r.status||(localStorage.removeItem("bw-client-token"),window.location.href="/",dispatch(logout())),e.next=8,r.json();case 8:n=e.sent,h(n);case 10:return e.prev=10,f(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,,10,13]])})),function(){var r=this,o=arguments;return new Promise((function(n,t){var i=e.apply(r,o);function s(e){b(i,n,t,s,l,"next",e)}function l(e){b(i,n,t,s,l,"throw",e)}s(void 0)}))})()}),[o,n]),s.useEffect((function(){console.log(u)}),[u]),s.useEffect((function(){localStorage.getItem("bw-client-token")&&o.isAuth||(window.location.href="/")}),[o.isAuth]),(0,i.jsxs)(_.Z,{categories:r,children:[(0,i.jsxs)(l.default,{children:[(0,i.jsx)("title",{children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),(0,i.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,i.jsxs)("div",{className:p().root,children:[(0,i.jsx)(c.Z,{className:p().title,children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u0430\u0448\u0438\u0445 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),(0,i.jsxs)("div",{className:"container",children:[!w&&0===u.length&&(0,i.jsx)("div",{className:p().noContent,children:"\u0423 \u0432\u0430\u0441 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),!w&&0!==u.length&&(0,i.jsxs)("div",{className:p().table,children:[(0,i.jsxs)("div",{className:p().header,children:[(0,i.jsx)("div",{className:p().col,children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,i.jsx)("div",{className:p().col,children:"\u041a\u043e\u043b-\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),(0,i.jsx)("div",{className:p().col,children:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0442\u0430\u0432\u043a\u0438"}),(0,i.jsx)("div",{className:p().col,children:"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"}),(0,i.jsx)("div",{className:p().col,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),(0,i.jsx)("div",{className:p().col,children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u0430"})]}),u.map((function(e,r){return(0,i.jsxs)("button",{className:p().row,onClick:function(){return N(e.orderId)},children:[(0,i.jsx)("div",{className:p().col,children:e.orderStatus}),(0,i.jsxs)("div",{className:p().col,children:[e.type.reduce((function(e,r){return e+r.count}),0)," \u0448\u0442."]}),(0,i.jsx)("div",{className:p().col,children:e.deliveryType}),(0,i.jsx)("div",{className:p().col,children:e.paymentType}),(0,i.jsxs)("div",{className:p().col,children:[e.type.reduce((function(e,r){return e+(r.price-r.price/100*r.discount)}),0)," \u0441."]}),(0,i.jsx)("div",{className:p().col,children:new Date(e.orderAt).toLocaleDateString()})]},r)}))]})]}),!w&&0!==u.length&&(0,i.jsx)("div",{className:p().mobileTable,children:u.map((function(e,r){return(0,i.jsx)(j,{item:e},r)}))})]})]})}},1697:function(e){e.exports={root:"Title_root__iQCXf",wrap:"Title_wrap__StYPt"}},2358:function(e){e.exports={title:"OrderList_title__1eQQ1",container:"OrderList_container__f4Tn0",noContent:"OrderList_noContent__Rc4R9",table:"OrderList_table__dGdtw",mobileTable:"OrderList_mobileTable__zfDR7",mobileDropdown:"OrderList_mobileDropdown__PYkUr",mobileDropdown__label:"OrderList_mobileDropdown__label__CwuVT",mobileDropdown__content:"OrderList_mobileDropdown__content__41D4B",mobileDropdown__content__row:"OrderList_mobileDropdown__content__row__biyZx",mobileDropdown__prop:"OrderList_mobileDropdown__prop__5wvUu",mobileDropdown__value:"OrderList_mobileDropdown__value__KF_pk",mobileDropdown__rows:"OrderList_mobileDropdown__rows__ypaMk",mobileDropdown__arrow:"OrderList_mobileDropdown__arrow__sdN_6",open:"OrderList_open__oKmkD",mobileDropdown__link:"OrderList_mobileDropdown__link__T6qlq",row:"OrderList_row__9jsCY",col:"OrderList_col__ca4em",header:"OrderList_header__cwlCB",single:"OrderList_single__PhzLr",panel:"OrderList_panel__l6TeN",item:"OrderList_item__1xYGH",statusProperty:"OrderList_statusProperty__mK813",value:"OrderList_value___rdNz",products:"OrderList_products__pv3EX",subtitle:"OrderList_subtitle__xb1Bv",product:"OrderList_product__C0Dj_",description:"OrderList_description__jejaa",status:"OrderList_status___xu8a",new:"OrderList_new__Y1T3V",approved:"OrderList_approved__IHdI0",rejected:"OrderList_rejected__pbyKf"}}},function(e){e.O(0,[92,168,774,888,179],(function(){return r=7095,e(e.s=r);var r}));var r=e.O();_N_E=r}]);