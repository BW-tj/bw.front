(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8161:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(4961)}])},919:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(5893),i=n(7294),a=(n(9484),n(4184)),o=n.n(a),l=n(2814);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=function(e){var t=e.totalPages,n=e.page,a=e.onPageChange,s=e.className,c=u(i.useState([]),2),f=c[0],d=c[1];return i.useEffect((function(){var e=[];if(t<10)for(var r=1;r<=t;r++)e.push({type:"page",value:r});else if(n<7){for(var i=1;i<=7;i++)e.push({type:"page",value:i});e.push({type:"arrowRight"}),e.push({type:"page",value:t})}else if(n>t-6){e.push({type:"page",value:1}),e.push({type:"arrowLeft"});for(var a=t-6;a<=t;a++)e.push({type:"page",value:a})}else{e.push({type:"page",value:1}),e.push({type:"arrowLeft"});for(var o=n-2;o<=n+2;o++)e.push({type:"page",value:o});e.push({type:"arrowRight"}),e.push({type:"page",value:t})}d(e)}),[n,t]),(0,r.jsx)("div",{className:o()("pagination",s),children:f.map((function(e,t){return"page"===e.type?(0,r.jsx)("div",{className:o()("pagination__item",e.value===n&&"pagination__item--active"),onClick:function(){return a(e.value)},children:e.value},t):"arrowRight"===e.type?(0,r.jsx)("div",{className:"pagination__item pagination__item--arrow",onClick:function(){return a(n+1)},children:(0,r.jsx)(l.G,{icon:"fa-solid fa-arrow-right",size:30})},t):(0,r.jsx)("div",{className:"pagination__item pagination__item--arrow",onClick:function(){return a(n-1)},children:(0,r.jsx)(l.G,{icon:"fa-solid fa-arrow-left"})},t)}))})}},5616:function(e,t,n){"use strict";var r=n(5893),i=n(4184),a=n.n(i),o=n(7294),l=n(9484),u=n(9256),s=n.n(u);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=function(e){var t=e.id,n=e.width,i=e.label,u=e.menu,f=e.onSelect,d=c(o.useState(!1),2),v=d[0],_=d[1];return o.useEffect((function(){var e=function(e){e.target.closest("#tools-dropdown-"+t)||_(!1)};return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}}),[t]),(0,r.jsxs)("div",{id:"tools-dropdown-"+t,className:s().dropdown,children:[(0,r.jsxs)("button",{className:a()(s().dropdown_label,v&&s().active),onClick:function(){return _(!v)},children:[i,(0,r.jsx)("div",{className:s().dropdown_label_icon,children:(0,r.jsx)(l.Ne,{size:20})})]}),v&&(0,r.jsx)("div",{className:s().dropdown_menu,style:{width:n+"px"},children:u.map((function(e,t){return(0,r.jsx)("button",{className:s().dropdown_menu_item,onClick:function(){_(!1),f(e.value)},children:e.name},t)}))})]})};t.Z=function(e){var t=e.pageSize,n=e.onPageSizeChange,i=e.sort,a=e.onSort,o={1:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438: \u043d\u043e\u0432\u0438\u043d\u043a\u0438 \u0432\u044b\u0448\u0435",2:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0446\u0435\u043d\u0435: \u0434\u0435\u0448\u0435\u0432\u044b\u0435 \u0432\u044b\u0448\u0435",3:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0446\u0435\u043d\u0435: \u0434\u0435\u0448\u0435\u0432\u044b\u0435 \u043d\u0438\u0436\u0435",4:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043f\u043e\u043a\u0443\u043f\u0430\u0435\u043c\u043e\u0441\u0442\u0438",5:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0443 \u0441\u043a\u0438\u0434\u043a\u0438: \u0432\u044b\u0441\u043e\u043a\u0438\u0435 \u0441\u043a\u0438\u0434\u043a\u0438 \u0432 \u043d\u0430\u0447\u0430\u043b\u0435",6:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0435"};return(0,r.jsxs)("div",{className:s().root,children:[(0,r.jsx)(f,{id:1,width:180,label:t+" \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",menu:[{value:20,name:"20 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"},{value:30,name:"30 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"},{value:40,name:"40 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"},{value:50,name:"50 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}],onSelect:function(e){return n(e)}}),(0,r.jsx)(f,{id:2,width:300,label:o[i],menu:[{value:1,name:o[1]},{value:2,name:o[2]},{value:3,name:o[3]},{value:4,name:o[4]},{value:5,name:o[5]},{value:6,name:o[6]}],onSelect:function(e){return a(e)}})]})}},7367:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var r=function(e){var t={};return e?(Object.keys(e).forEach((function(n){Array.isArray(e[n])&&(t[n]=e[n].join(" ")),""!==e[n]&&null!==e[n]&&void 0!==e[n]&&(t[n]=e[n])})),new URLSearchParams(t).toString()):""}},4961:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return C},default:function(){return O}});var r=n(8520),i=n.n(r),a=n(5893),o=n(7294),l=n(9008),u=n(1163),s=n(7367),c=n(919),f=n(4660),d=n(7737),v=n(1627),_=n(4184),p=n.n(_),h=n(9484);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=function(e){var t=e.styles,n=e.selectedFilters,r=e.value,i=e.onClick,l=m(o.useState(!1),2),u=l[0],s=l[1];return o.useEffect((function(){(null===n||void 0===n?void 0:n.includes(r.id))?s(!0):s(!1)}),[n,r.id]),(0,a.jsxs)("button",{className:t.filter_value,onClick:function(){return i(r.id)},children:[(0,a.jsx)("div",{className:t.filter_value_icon,children:u?(0,a.jsx)(h.Jg,{size:20}):(0,a.jsx)(h.kX,{size:20})}),r.name]})};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w=function(e){var t=e.filter,n=e.selectedFilters,r=e.styles,i=e.toggleFilter,l=g(o.useState(!0),2),u=l[0],s=l[1],c=g(o.useState(0),2),f=c[0],d=c[1],v=o.useRef(null);return o.useEffect((function(){v&&d(v.current.offsetHeight)}),[v,t]),(0,a.jsxs)("div",{className:r.filter,children:[(0,a.jsxs)("button",{className:r.filter_label,onClick:function(){return s(!u)},children:[t.name,(0,a.jsx)("span",{className:p()(r.filterArrow,u&&r.open),children:(0,a.jsx)(h.Wd,{size:20})})]}),(0,a.jsx)("div",{className:r.filter_menu_wrap,style:{height:u?f+"px":0},children:(0,a.jsx)("div",{className:r.filter_menu,ref:v,children:t.values.map((function(e){return(0,a.jsx)(y,{styles:r,value:e,onClick:i,selectedFilters:n},e.id)}))})})]})},b=n(7993),j=n.n(b),x=function(e){var t=e.isEmpty,n=e.filters,r=e.selectedFilters,i=e.toggleFilter;return t?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)("div",{className:j().root,children:[(0,a.jsx)("div",{className:j().title,children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"}),(0,a.jsxs)("div",{className:j().filters,children:[0!==n.length&&n.map((function(e,t){return(0,a.jsx)(w,{toggleFilter:i,selectedFilters:r,filter:e,styles:j()},t)})),0===n.length&&(0,a.jsx)("div",{className:j().noFilters,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})]})},S=n(5168),N=n(5616),F=n(3798),E=n(3040),k=n.n(E),A=n(6079);function I(e,t,n,r,i,a,o){try{var l=e[a](o),u=l.value}catch(s){return void n(s)}l.done?t(u):Promise.resolve(u).then(r,i)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){P(e,t,n[t])}))}return e}function z(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C=!0,O=function(e){var t=e.categories,n=(0,o.useState)(!0),r=n[0],_=n[1],p=(0,o.useState)(null),h=p[0],m=p[1],y=(0,o.useState)(null),g=y[0],w=y[1],b=(0,u.useRouter)(),j=o.useCallback((function(e){g&&g.filters&&(g.filters.includes(e)?w((function(t){return T({},t,{filters:t.filters.filter((function(t){return t!==e}))})})):w((function(t){return T({},t,{filters:z(t.filters).concat([e])})})))}),[g]);return(0,o.useEffect)((function(){var e=new URLSearchParams(window.location.search),t=Object.fromEntries(e.entries());w((function(e){return T({},e,{query:t.q,categoryId:t.categoryId?t.categoryId:"",filters:[],pageNumber:1,pageSize:30,sort:1})}))}),[b.query]),(0,o.useEffect)((function(){if(g){var e,t="https://api.chistayaliniya.tj/api/product/filtration?"+(0,s.y)(g),n={method:"GET"};(e=i().mark((function e(){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,fetch(t,n);case 4:return 401!==(r=e.sent).status&&403!==r.status||(localStorage.removeItem("bw-client-token"),window.location.href="/",dispatch((0,A.k)())),e.next=8,r.json();case 8:a=e.sent,m(a);case 10:return e.prev=10,window.setTimeout((function(){_(!1)}),200),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,,10,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){I(a,r,i,o,l,"next",e)}function l(e){I(a,r,i,o,l,"throw",e)}o(void 0)}))})()}}),[g]),(0,a.jsxs)(S.Z,{categories:t,children:[(0,a.jsx)(l.default,{children:(0,a.jsxs)("title",{children:[(null===g||void 0===g?void 0:g.query)||'""'," \u2013 \u043a\u0443\u043f\u0438\u0442\u044c \u0432 \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0441\u0442\u0438\u0440\u043a\u0435"]})}),(0,a.jsxs)("div",{className:k().root,children:[(0,a.jsxs)(f.Z,{className:k().title,children:["\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430 ",r?"...":null===h||void 0===h?void 0:h.data.length]}),(0,a.jsxs)("div",{className:k().container,children:[(0,a.jsx)("div",{className:k().sidebar,children:(0,a.jsx)(x,{isEmpty:0===(null===h||void 0===h?void 0:h.data.length),filters:(null===h||void 0===h?void 0:h.filters)||[],selectedFilters:(null===g||void 0===g?void 0:g.filters)||[],toggleFilter:j})}),(0,a.jsxs)("div",{className:k().products,children:[(0,a.jsx)(N.Z,{pageSize:(null===g||void 0===g?void 0:g.pageSize)||30,onPageSizeChange:function(e){return w((function(t){return T({},t,{pageSize:e})}))},sort:(null===g||void 0===g?void 0:g.sort)||1,onSort:function(e){return w((function(t){return T({},t,{sort:e})}))}}),(0,a.jsxs)(v.Z,{children:[r&&(0,a.jsx)(F.Ip,{}),!r&&h.data.map((function(e){return(0,a.jsx)(d.Z,{id:e.id,data:e},e.id)}))]}),(0,a.jsx)(c.t,{page:(null===g||void 0===g?void 0:g.pageNumber)||1,totalPages:(null===h||void 0===h?void 0:h.totalPages)||1,onPageChange:function(e){return w((function(t){return T({},t,{pageNumber:e})}))}})]})]})]})]})}},7993:function(e){e.exports={root:"FilterSidebar_root__VI9f_",fadeIn:"FilterSidebar_fadeIn__7X7oI",title:"FilterSidebar_title__uuBJG",filters:"FilterSidebar_filters__tI_lJ",filter_label:"FilterSidebar_filter_label__NUmgn",filter_menu_wrap:"FilterSidebar_filter_menu_wrap__JIUWN",filter_menu:"FilterSidebar_filter_menu__NmJUs",filter_value:"FilterSidebar_filter_value__VGzGr",filter_value_icon:"FilterSidebar_filter_value_icon__GoFfz",filterArrow:"FilterSidebar_filterArrow__hdtzf",open:"FilterSidebar_open__6FX3V"}},9256:function(e){e.exports={root:"Tools_root__Mx5_O",dropdown:"Tools_dropdown__4rSVU",dropdown_label:"Tools_dropdown_label__V4pHo",dropdown_label_icon:"Tools_dropdown_label_icon__4NkfE",active:"Tools_active__dv2F_",dropdown_menu:"Tools_dropdown_menu__kWzsl",fadeIn:"Tools_fadeIn__BOQtM",dropdown_menu_item:"Tools_dropdown_menu_item__P_6ea"}},3040:function(e){e.exports={root:"Search_root__jyele",title:"Search_title__hJq07",container:"Search_container__0y6u3"}}},function(e){e.O(0,[92,841,168,914,774,888,179],(function(){return t=8161,e(e.s=t);var t}));var t=e.O();_N_E=t}]);